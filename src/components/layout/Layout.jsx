import * as LayoutST from './LayoutStyle'
import React, { useContext, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { PageContext } from '../../components/context/PageContext'

export default function Layout(props) {

    const navigate = useNavigate();
    const { page } = useContext(PageContext);

    const [isShake, setIsShake] = useState(false);

    const isUserHandler = () => {
        if(props.isLogin === false) {
            setIsShake(true);
            setTimeout(() => {
                setIsShake(false);
            }, 3000)
        } else {
            navigate('/mypage');
        } 
    }

    return (
        <LayoutST.Content>
            <LayoutST.Header>
                {/* 뒤로가기 */}
                { (page === 'MainPage') ||
                  (page === 'SignUpSuccess') ||
                  (page === 'stepComplete') ? (
                    <></>
                ) : (
                <LayoutST.BackBtn onClick={() => {navigate(-1)}}>
                    <svg
                        width="18"
                        height="16"
                        viewBox="0 0 14 23"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path d="M1.35303 12.7688C0.718261 12.1341 0.718261 11.1032 1.35303 10.4685L11.103 0.718456C11.7378 0.0836902 12.7687 0.0836901 13.4034 0.718456C14.0382 1.35322 14.0382 2.38408 13.4034 3.01885L4.80107 11.6212L13.3983 20.2235C14.0331 20.8583 14.0331 21.8892 13.3983 22.5239C12.7636 23.1587 11.7327 23.1587 11.0979 22.5239L1.34795 12.7739L1.35303 12.7688Z" fill="var(--main-white)"/>
                    </svg>
                </LayoutST.BackBtn>
                )}
                
                {/* 기프티콘샵, 마이페이지 */}
                <LayoutST.GiftMy>
                    {page === 'MainPage' ? ( <>
                    <svg
                        width="27"
                        height="26"
                        viewBox="0 0 27 26"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                        style={{
                            position: 'absolute',
                            bottom: '11px',
                            marginRight: '66px',
                            cursor: 'pointer',
                            }}
                        onClick={() => {navigate('/shop')}}>
                    <path d="M3.86733 14.6852C3.16181 14.625 2.47581 14.3363 1.96344 13.7578C1.09292 12.7766 1.10574 11.4376 1.20984 10.3771C1.41902 8.32386 1.91597 6.30876 2.69554 4.39225C2.96064 3.74484 3.28794 3.08243 3.91997 2.65586C4.5733 2.21757 5.34233 2.16818 5.8593 2.13788C11.737 1.78702 17.5984 2.26048 23.588 2.81934C23.8836 2.84459 24.1453 3.02937 24.2708 3.30405C26.0377 7.103 26.1866 9.08526 26.183 11.1086C26.1851 12.273 26.1123 13.6001 25.2423 14.5952C24.1617 15.8362 22.1401 16.0494 20.6333 15.0679C20.0304 14.678 19.5231 14.1203 19.1402 13.4514C18.485 14.546 17.4277 15.3559 16.1286 15.2721C15.0971 15.2246 14.1447 14.568 13.5464 13.5693C13.4577 13.4196 13.3762 13.2637 13.3021 13.1017C12.9177 13.7187 12.424 14.1909 11.8364 14.4927C11.2909 14.7777 10.7133 14.8841 10.1725 14.7973C9.05056 14.6202 8.19118 13.667 7.80831 12.2062C7.48389 12.835 7.03851 13.4535 6.41591 13.9283C5.72766 14.4583 4.775 14.756 3.86791 14.6785L3.86733 14.6852ZM20.3212 4.21889C15.4767 3.80519 10.7147 3.5339 5.96618 3.81875C5.51698 3.84808 5.12152 3.88199 4.87029 4.05004C4.59717 4.23654 4.41262 4.65394 4.25897 5.02661C3.53963 6.7926 3.08275 8.65545 2.88735 10.5474C2.81251 11.2652 2.78496 12.1427 3.22358 12.6336C3.7175 13.1902 4.77005 13.0703 5.39266 12.5955C6.03772 12.0956 6.50932 11.2493 6.87211 9.93336C6.95111 9.6423 7.02397 9.34396 7.09682 9.04561C7.32383 8.13098 7.55313 7.18948 8.01531 6.29493C8.21042 5.91227 8.66553 5.73455 9.07122 5.89779C9.47076 6.05374 9.69052 6.49213 9.57374 6.90856C9.17317 8.34982 9.09552 9.89311 9.34229 11.3626C9.47403 12.1183 9.82889 13.0353 10.4296 13.1339C10.6032 13.1623 10.8306 13.114 11.0571 12.998C12.0483 12.4871 12.3575 11.0854 12.4472 10.511C12.5204 10.0502 12.5471 9.57872 12.5834 9.0742C12.6359 8.30035 12.6908 7.49961 12.894 6.70479C13.0058 6.26763 13.4482 6.00084 13.8804 6.09189C14.3193 6.18351 14.6146 6.60806 14.5432 7.04866C14.3508 8.27082 14.3186 9.52018 14.4499 10.7564C14.5142 11.3508 14.6319 12.1121 14.9875 12.7042C15.2955 13.2178 15.8005 13.5655 16.2317 13.5888C17.1405 13.6461 17.9207 12.5148 18.1279 11.436C18.2287 10.8896 18.2568 10.3235 18.2815 9.71647C18.3225 8.8401 18.3664 7.93014 18.6533 7.0274C18.7841 6.6054 19.2175 6.36491 19.6491 6.46268C20.0807 6.56045 20.3565 6.97656 20.2923 7.41101C20.1089 8.60687 19.9227 9.83631 20.0805 11.0004C20.2433 12.1852 20.7767 13.1512 21.5463 13.6501C22.2516 14.1096 23.3855 14.1456 23.9632 13.4842C24.451 12.9235 24.4893 11.9995 24.4917 11.0996C24.4908 9.60374 24.4926 7.9186 22.935 4.4421C22.0548 4.36693 21.1824 4.2789 20.3089 4.2043L20.3212 4.21889Z"
                    fill="var(--main-white)"/>
                    <path d="M7.79222 24.2871C7.07326 24.2257 6.35545 24.1509 5.63822 24.0694C4.98146 23.993 3.74799 23.8538 3.00554 22.9579C2.52678 22.3823 2.39217 21.6602 2.32557 21.0927C2.10323 19.1786 2.31361 17.9039 2.60005 16.1348C2.67324 15.674 3.10623 15.359 3.56641 15.4389C4.02717 15.5121 4.33542 15.9445 4.26223 16.4053C3.97752 18.1543 3.80565 19.2157 4.00046 20.8973C4.03954 21.2323 4.1059 21.6441 4.30255 21.8775C4.58467 22.2196 5.23913 22.3229 5.82928 22.3868C10.1932 22.8813 14.6301 22.9963 19.0196 22.7146C20.2787 22.6326 21.6085 22.516 22.7665 22.0329C22.8506 21.9994 23.1174 21.8869 23.2016 21.7722C23.3162 21.6196 23.2968 21.2118 23.2839 20.9671L23.1272 17.3327C23.1058 16.8706 23.4712 16.4754 23.9333 16.454C24.4015 16.4398 24.7905 16.7979 24.812 17.26L24.9686 20.8944C24.9895 21.3631 25.0249 22.1377 24.5582 22.7679C24.2364 23.2075 23.7773 23.4322 23.4118 23.5905C22.0156 24.1684 20.5284 24.3054 19.1265 24.3955C15.3631 24.6359 11.5561 24.595 7.78665 24.2731L7.79222 24.2871Z"
                        fill="var(--main-white)"/>
                    </svg>
                    <svg
                        width="20"
                        height="23"
                        viewBox="0 0 20 23"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                        style={{
                            position: 'absolute',
                            bottom: '12px',
                            marginRight: '24px',
                            cursor: 'pointer',
                            }}
                        onClick={isUserHandler}>
                        <path d="M1.95027 22C0.952267 17.9474 -0.714144 13.1579 5.87267 10.2105C1.68106 3.43158 6.37182 1.24561 9.24116 1C11.9857 1.12281 16.8759 3.13684 14.4807 10.2105C20.4687 13.7474 19.1658 17.2105 18.043 22" stroke="#E0E0E0" strokeWidth="2"/>
                    </svg> </> ) : (<></>)}
                </LayoutST.GiftMy>
                {isShake === true ?
                    <LayoutST.ShakeBox>
                        로그인 후 이용 가능합니다 :)
                    </LayoutST.ShakeBox> :
                    <></>}

            </LayoutST.Header>
            {props.children}
        </LayoutST.Content>
    )
}